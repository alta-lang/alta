import printLine from "io"
import String from "string"

async function iLikeToYield(times: int): int {
	for i: int in 0..times {
		printLine("iLikeToYield: yielding...")
		yield;
		printLine("iLikeToYield: yielded")
	}
	return times * 2
}

async function callMe(): void {
	for i: int in 0..2 {
		printLine("callMe: doing iter #", i)
		printLine("callMe: iLikeToYield returned ", await iLikeToYield(i + 1))
	}
}

literal function main(): int {
	let instance = callMe()
	let scheduler = new Scheduler

	scheduler.schedule(instance)

	scheduler.finishAll()

	return 0
}
